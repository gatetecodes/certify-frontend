<div class="verify-container" *ngIf="!loading">
  <ng-container *ngIf="!error && result; else errorBlock">
    <div class="status flex flex-col items-center justify-center gap-0" [class.valid]="result!.valid" [class.invalid]="!result!.valid">
      <div class="status-header flex flex-col items-center justify-center gap-4">
        <span class="status-icon" *ngIf="result!.valid" aria-hidden="true">
          <svg viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="11" />
            <path d="M8 12.5l2.5 2.5L16 9" />
          </svg>
        </span>
        <span class="status-icon invalid" *ngIf="!result!.valid" aria-hidden="true">
          <svg viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="11" />
            <path d="M8 8l8 8M16 8l-8 8" />
          </svg>
        </span>
        <h1 *ngIf="result!.valid">Certificate is valid</h1>
        <h1 *ngIf="!result!.valid">Certificate is not valid</h1>
      </div>
      <p class="reason">Reason: {{ result!.reason }}</p>
    </div>

    <div class="details flex flex-col items-center justify-center gap-0">
      <h2 class="text-lg font-bold">Details</h2>
      <p class="text-sm"><strong>Certificate ID:</strong> {{ result!.certificateId }}</p>
      <p class="text-sm"><strong>Template ID:</strong> {{ result!.templateId }}</p>
      <p class="text-sm"><strong>Issued at:</strong> {{ result!.issuedAt | date: "medium" }}</p>
    </div>
  </ng-container>

  <ng-template #errorBlock>
    <div class="status invalid">
      <h1>Could not verify certificate</h1>
      <p>{{ error }}</p>
    </div>
  </ng-template>
</div>

<div class="verify-container" *ngIf="loading">
  <p>Verifying certificate...</p>
</div>
